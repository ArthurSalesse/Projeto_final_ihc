<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/carrosel.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
      rel="stylesheet"
    />
    <title>LocaFlix</title>
    <style>
      /* Pequeno ajuste para o badge de contador */
      .cart-icon-button { position: relative; }
      #cart-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #ff3b3b;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
      }

      /* Estilos m√≠nimos para sidebar quando .open */
      .cart-sidebar { transition: transform 0.3s ease; transform: translateX(100%); position: fixed; right: 0; top: 0; height: 100%; width: 320px; background: #111214; color: #e6e6e6; box-shadow: -8px 0 24px rgba(0,0,0,0.6); z-index: 9998; padding: 16px; }
      .cart-sidebar.open { transform: translateX(0); }
      .close-btn { background: transparent; color: #e6e6e6; border: none; font-size: 22px; cursor: pointer; }
      .cart-items { margin-top: 12px; max-height: 60vh; overflow-y: auto; }
      .checkout-btn { background: #2376ff; color: white; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer; }
    </style>
  </head>

  <body class="app">
    <div id="cart-sidebar" class="cart-sidebar">
      <div class="cart-header" style="display:flex; justify-content:space-between; align-items:center;">
        <h3>üõí Meu Carrinho</h3>
        <button class="close-btn" onclick="toggleCartSidebar()">√ó</button>
      </div>
      <div id="cart-items" class="cart-items">
        <p>Nenhum filme no carrinho.</p>
      </div>
      <div class="cart-footer" style="position: absolute; bottom: 20px; left: 16px; right:16px;">
        <p>Total: <span id="cart-total">R$ 0,00</span></p>
        <button class="checkout-btn" onclick="openPaymentModal()">
          Finalizar Compra
        </button>
      </div>
    </div>

    <div id="payment-modal" class="modal" style="display:none;">
      <div class="modal-content" style="background:#1a1d22; color:#e6e6e6; padding:18px; border-radius:8px; max-width:400px; margin: 80px auto;">
        <span class="close-btn" onclick="closePaymentModal()">&times;</span>
        <h4>Selecione a Op√ß√£o de Pagamento</h4>
        <div id="payment-options" style="margin:12px 0;">
          <label style="display:block; margin-bottom:6px;"><input type="radio" name="payment" value="credit-card" /> Cart√£o de Cr√©dito</label>
          <label style="display:block; margin-bottom:6px;"><input type="radio" name="payment" value="pix" /> Pix</label>
          <label style="display:block; margin-bottom:6px;"><input type="radio" name="payment" value="boleto" /> Boleto</label>
        </div>
        <button onclick="confirmPayment()">Confirmar Pagamento</button>
      </div>
    </div>

    <div id="confirmation-modal" class="modal" style="display:none;">
      <div class="modal-content" style="background:#1a1d22; color:#e6e6e6; padding:18px; border-radius:8px; max-width:500px; margin: 80px auto;">
        <span class="close-btn" onclick="closeConfirmationModal()">&times;</span>
        <h4 id="confirmation-message"></h4>
        <button onclick="closeConfirmationModal()">Fechar</button>
      </div>
    </div>

    <header class="cabecalho">
      <nav class="lista__cabecalho">
        <p href="logo">LocaFlix‚≠ê</p>
        <input type="text" id="campoBusca" placeholder="üîç‚ÄãBuscar filme..." />
        <article>
          <span class="ola" id="welcomeUser" style="font-size: 18px;"></span>
          <a class="cabecalho__click" href="landing.html">Mais informa√ß√µes</a>
          <a class="cabecalho__click" id="btnLogin" href="index_login.html">Login</a>
          <a class="cabecalho__click" id="btnLogout" style="display:none; cursor:pointer;" onclick="logout()">
              Sair
          </a>


          <button class="cart-icon-button" onclick="toggleCartSidebar()">
            <span id="cart-count">0</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 576 512"
              fill="white"
              width="24px"
              height="24px"
            >
              <path
                d="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H204.3c-43.9 0-81.7-28-100.6-67.9L16 64H24C10.7 64 0 53.3 0 40V24zM240 448a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm256 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"
              />
            </svg>
          </button>
        </article>
      </nav>
    </header>

    <main>
      <section class="imagem__principal" id="destaque">
        <div class="overtext">
          <h1 class="titulo__imagem">Demon Slayer</h1>
          <p class="descricao__imagem">
            Um menino criado por javali embarca no Trem Infinito em uma<br />
            nova miss√£o com o Pilar da Chama.
          </p>
          <p class="imdb">IMDb 8,6 2h35m 2025</p>
          <p class="classificacao">A√ß√£o | aventura</p>
          <button onclick="addToCart('demon-slayer')">Alugar R$7,90</button>
          <button
            onclick="window.location.href='detalhes.html?filme=demon-slayer'"
          >
            Detalhes
          </button>
        </div>
      </section>

      <h2>Populares na Plataforma</h2>
      <section class="carrossel-container" id="destaques">
        <button class="btn btn-left">&#10094;</button>
        <div class="carrossel">
          <article class="filme">
            <img src="../imagens/robocop.jpg" alt="robocop" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('robocop')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=robocop'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Wandering.jpg" alt="wandering" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('wandering')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=wandering'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Thunderbolts.png" alt="thunderbolts" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('thunderbolts')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=thunderbolts'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Uncharted.png" alt="Uncharted" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('uncharted')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=uncharted'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/MadMax.png" alt="MadMax" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('madmax')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=madmax'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img
              src="../imagens/DeVoltaParaoFuturo.png"
              alt="De Volta Para o Futuro"
            />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('devoltaparaofuturo')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=devoltaparaofuturo'"
              >
                Detalhes
              </button>
            </div>
          </article>
        </div>
        <button class="btn btn-right">&#10095;</button>
      </section>

      <h2>Porque voc√™ assistiu a Zootopia</h2>
      <section class="carrossel-container" id="Populares">
        <button class="btn btn-left">&#10094;</button>
        <div class="carrossel">
          <article class="filme">
            <img src="../imagens/Soul.jpg" alt="Soul" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('soul')">Adicionar ao carrinho</button
              ><br />
              <button onclick="window.location.href='detalhes.html?filme=soul'">
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/UmaFamiliaFeliz.png" alt="Uma Familia Feliz" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('umafamiliafeliz')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=umafamiliafeliz'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img
              src="../imagens/PetsaVidaSelvagem.webp"
              alt="Pets a Vida Selvagem"
            />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('petsavidaselvagem')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=petsavidaselvagem'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/EstreladeBelem.jpg" alt="Estrela de Belem" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('estreladebelem')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=estreladebelem'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/aCaminhodeCasa.jpg" alt="A Caminho de Casa" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('acaminhodecasa')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=acaminhodecasa'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Divertidamente.png" alt="Divertidamente" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('divertidamente')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=divertidamente'"
              >
                Detalhes
              </button>
            </div>
          </article>
        </div>
        <button class="btn btn-right">&#10095;</button>
      </section>

      <h2>Aterrorizantes</h2>
      <section class="carrossel-container">
        <button class="btn btn-left">&#10094;</button>
        <div class="carrossel">
          <article class="filme">
            <img
              src="../imagens/naCompanhiadoMal.webp"
              alt="Na Companhia do Mal"
            />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('nacompanhiadomal')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=nacompanhiadomal'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/session9.jpg" alt="Sess√£o 9" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('sessao9')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=sessao9'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Cadaver.webp" alt="Cadaver" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('cadaver')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=cadaver'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/Sinister.jpg" alt="A Entidade" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('aentidade')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=aentidade'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/ItaCoisa.jpg" alt="It a Coisa" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('itacoisa')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=itacoisa'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/FaleComigo.webp" alt="Fale Comigo" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('falecomigo')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=falecomigo'"
              >
                Detalhes
              </button>
            </div>
          </article>
        </div>
        <button class="btn btn-right">&#10095;</button>
      </section>

      <h2>A√ß√£o e Aventura</h2>
      <section class="carrossel-container">
        <button class="btn btn-left">&#10094;</button>
        <div class="carrossel">
          <article class="filme">
            <img src="../imagens/Super8.jpg" alt="Super 8" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('super8')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=super8'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/NaSelva.jpg" alt="Na Selva" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('naselva')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=naselva'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img
              src="../imagens/DungeonsEdragons.jpg"
              alt="Dungeons e Dragons"
            />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('dungeonsedragons')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=dungeonsedragons'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/AGrandeMuralha.jpg" alt="A Grande Muralha" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('agrandemuralha')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=agrandemuralha'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img src="../imagens/MonsterHunter.jpg" alt="Monster Hunter" />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('monsterhunter')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=monsterhunter'"
              >
                Detalhes
              </button>
            </div>
          </article>

          <article class="filme">
            <img
              src="../imagens/OsenhordosAneis.jpg"
              alt="O Senhor dos An√©is"
            />
            <div class="overlay">
              <p>Alugar por R$ 7,90</p>
              <button onclick="addToCart('osenhordosaneis')">
                Adicionar ao carrinho
              </button>
              <br />
              <button
                onclick="window.location.href='detalhes.html?filme=osenhordosaneis'"
              >
                Detalhes
              </button>
            </div>
          </article>
        </div>
        <button class="btn btn-right">&#10095;</button>
      </section>
    </main>

    <footer class="footer">
      <p class="logo__footer">LocaFlix‚≠ê</p>
      <article>
        <a
          href="https://www.termsfeed.com/live/95e042e5-41de-4507-9929-43f2ed241a31"
        >
          Termos e aviso de privacidade
        </a>
        <p>¬©2025 - LocaFlix, todos os direitos reservados</p>
      </article>
    </footer>

    <div
      id="notify"
      style="
        position: fixed;
        top: -60px;
        left: 50%;
        transform: translateX(-50%);
        background: #2376ff;
        padding: 14px 30px;
        color: white;
        border-radius: 8px;
        font-size: 18px;
        transition: 0.3s;
        z-index: 9999;
      "
    ></div>

    <script src="../js/interacao.js" defer></script>
    <script src="../js/auth.js" defer></script>
    <script>
      // Fun√ß√£o toggleCartSidebar precisa existir globalmente (interacao.js n√£o tem toggle,
      // porque a vers√£o original usava toggleCartSidebar). Implementamos simples aqui:
      function toggleCartSidebar() {
        const sidebar = document.getElementById('cart-sidebar');
        if (!sidebar) return;
        sidebar.classList.toggle('open');
      }
    </script>
  </body>
</html>
